#!/bin/sh
# JSON Store pre-commit hook
# Ensures all documents are canonically formatted before commit

echo "Formatting JSON Store documents..."

# Run format command
npx jsonstore format --all

# Check exit code
if [ $? -ne 0 ]; then
  echo "Error: Failed to format documents"
  exit 1
fi

# Stage any formatting changes
git add data/

exit 0
